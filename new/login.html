<!DOCTYPE HTML>
<link href="../login.css" rel="stylesheet" />
<link href="icon.png" rel="icon" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
<title>Log In | sync.js</title>
<html style="width:100%;height:100%;">
  <body style="width:100%;height:100%;background-image: url('icon.png');background-color: #464fb0;">
    <div class="modal-content" style="height:80%;align-items:center;text-align:center;" id="ibox">
<p></p>
<img src="icon.png" style="margin:auto" /><h1>Log In</h1><button id="btn" class="gbtn" style="display:none" onclick="handleAuthClick()"><span class='material-symbols-outlined'>login</span></button></div>
      <script>
          function handleAuthClick() {
   tokenClient.callback = async (resp) => {
      if (resp.error !== undefined) {
         throw (resp);
      }
      localStorage.setItem('gapi_token', JSON.stringify(gapi.client.getToken()));
      await findFile().then(function (fid) {
         if (fid == false) {
            uploadFile("{}")
         }
      })
       location.replace("dash")
   }
   if (gapi.client.getToken() === null) {
      // Prompt the user to select a Google Account and ask for consent to share their data
      // when establishing a new session.
      tokenClient.requestAccessToken({
         prompt: 'consent'
      });
   } else {
      // Skip display of account chooser and consent dialog for an existing session.
      tokenClient.requestAccessToken({
         prompt: ''
      });
   }
}

          function startup() {
              btn.style.display = "inline"
          }
      </script>
      <script src="drive.js"></script>
<script async defer src="https://apis.google.com/js/api.js"
        onload="gapiLoaded()"></script>
    <script async defer src="https://accounts.google.com/gsi/client"
        onload="gisLoaded()"></script>
  </body>
</html>
