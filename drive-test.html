<!DOCTYPE HTML>
<html>
  <head>
    <title>Test</title>
  </head>
  <body>
    <button id="signinButton">SignIn</button>
    <button id="signoutButton">SignOut</button>
    <button id="btn">Go!</button>
    <p></p>
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <meta name="google-signin-client_id" content="532321740472-sav0pgph4pqehgsu6ed1b6gges3uc9c1.apps.googleusercontent.com">
    <div class="g-signin2" data-onsuccess="handleCredentialResponse"></div
  </body>
  <script src="https://apis.google.com/js/api.js"></script>
   <script>
     var CLIENT_ID = "532321740472-sav0pgph4pqehgsu6ed1b6gges3uc9c1.apps.googleusercontent.com";
     var API_KEY = "AIzaSyDFaabRSbNULI9UxcBEzKqNE_01SiepwhE"
     var DISCOVERY_DOCS = ["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"]
     var SCOPES = "https://www.googleapis.com/auth/drive"

     function initClient() {
       gapi.client.init({
         apiKey: API_KEY,
         clientId: CLIENT_ID,
         discoveryDocs: DISCOVERY_DOCS,
         scope: SCOPES
       }).then(function() {
         gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus)
         updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get())
         signinButton.onclick = handleSignin;
         signoutButton.onclick = handleSignout;
       }, function(error) {console.error(error)})
     }
     
     function handleClientLoad() {
       gapi.load("client:auth2", initClient)
     }

     function updateSigninStatus(si) {
       alert(si)
     }

     window.onload = handleClientLoad

     function handleSignin() {
       gapi.auth2.getAuthInstance().signIn()
     }

     function handleSignout() {
       gapi.auth2.getAuthInstance().signOut().then(function() {location.reload()})
       gapi.auth2.getAuthInstance().disconnect()
     }
   </script>
</html>
