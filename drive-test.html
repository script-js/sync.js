<!DOCTYPE HTML>
<html>
  <head>
    <title>Test</title>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
  </head>
  <body>
    <button id="g_id_onload"
     data-client_id="YOUR_CLIENT_ID"
     data-callback="handleCredentialResponse">
  Sign in with Google
</button>
    <p></p>
  </body>
  <script>
    function handleCredentialResponse(response) {
    // Use the ID token to authenticate with the Google Drive API
    var id_token = response.credential;
    // ...
}
    function uploadTextFile(id_token, text, filename) {
    var boundary = '-------314159265358979323846';
    var delimiter = "\r\n--" + boundary + "\r\n";
    var close_delim = "\r\n--" + boundary + "--";

    var contentType = 'text/plain';
    var metadata = {
        'name': filename,
        'mimeType': contentType
    };

    var base64Data = btoa(text);
    var multipartRequestBody =
        delimiter +
        'Content-Type: application/json\r\n\r\n' +
        JSON.stringify(metadata) +
        delimiter +
        'Content-Type: ' + contentType + '\r\n' +
        'Content-Transfer-Encoding: base64\r\n' +
        '\r\n' +
        base64Data +
        close_delim;

    var request = gapi.client.request({
        'path': '/upload/drive/v3/files',
        'method': 'POST',
        'params': {'uploadType': 'multipart'},
        'headers': {
            'Content-Type': 'multipart/related; boundary="' + boundary + '"',
            'Authorization': 'Bearer ' + id_token
        },
        'body': multipartRequestBody});
    request.execute(function(file) {
        console.log("Uploaded file: " + file.id);
    });
}

  </script>
</html>
